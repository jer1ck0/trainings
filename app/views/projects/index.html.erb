<p id="notice"><%= notice %></p>

<h1>Projects</h1>

<div class="pull-right">
  <%= link_to_if Project.creatable_by?(current_user),
                 icon('plus', '<strong>Create Post</strong>'),
                 new_project_path,
                 class: 'btn btn-primary' do end %>
</div>

<table class="table project-index-table">
  <colgroup>
    <col width="20%" style="background: #fafafa" />
    <col width="10%" />
    <col width="10%" />
    <col width="15%" />
    <col width="15%" />
    <col width="15%" />
    <col width="15%" />
  </colgroup>
  <thead>
  <tr>
    <th>Keyname (#id)</th>
    <th class="center">Type</th>
    <th class="center">Owner</th>
    <th class="center">Show</th>
    <th class="center">Edit</th>
    <th class="center">Delete</th>
    <th class="center">Auth</th>
  </tr>
  </thead>

  <tbody>
    <% @projects.each do |proj| %>
    <% project = ProjectPresenter.new proj %>
      <tr>
        <!--keyname info-->
        <td>
          <%= link_to project.keyname,
                      project_posts_path(project),
                      class: 'project-keyname',
                      data: { toggle: 'tooltip', placement: 'right' },
                      title: "Post list 페이지로 이동" %>
        </td>
        <td><%= project.ptype%></td>
        <td><%= project.owner_fmt%></td>
        <td><%= link_to icon('eye'), project_path(project), class: 'label label-info', data: { toggle: 'modal', target: '#modal' }, remote: true%></td>
        <td><%= link_to icon('edit'), edit_project_path(project), class: 'label label-info'%></td>
        <td><%= link_to icon('trash-o', 'Delete'), project, method: :delete, data: { confirm: t('delete_confirm') },class: 'btn btn-danger actions-command-btn-item' %></td>

        <td><%= link_to icon('users'), project_permission_policy_path(project), class: 'label label-info'%></td>
        <td class="center actions">

        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Project', new_project_path %>


<!-- Modal -->
<%= render partial: 'shared/modal', locals: {
  header_style: 'bg-gradient-3'
} %>

<%= render partial: 'shared/modal', locals: {
  id: 'audits',
  header_style: 'bg-gradient-3',
  width: 'style=width:85%'
} %>